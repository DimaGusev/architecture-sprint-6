## Проблемы текущей архитекруты

* ошибки во время взаимодействия с внешними API не приводят в повторной попытке запросить данные, что может вести в наличию неактуальных данных в системе
* данные в сервисах core-app и ins-comp-settlement не консистентны
* увеличение количества страховых компаний влияет на надёжность работы сервисов
* сервисы, которые на прямую не отвечают за работу с внешним API -  по факту сильно зависят от них и вынуждены каждый по своему решать вопрос с недоступностью актуальных данных
* повышенная нагрузка на core-app сервис с момент взаиморасчёта со страховыми компаниями


## Предложения по решению

Внедрить очередь сообщений и изменить возаимодействия между сервисами. Сервис ins-product-aggregator должен переодически запрашивать данные о новых продуктах из API страховых компаний и публиковать эти данные в очередь сообщений. Если вызов оказался неудачным, должен повторять запрос. Так как сервис не имеет базы, то использование паттерна Transactional Outbox не требуется. Сервисы core-app и ins-comp-settlement должны быть подписаны на изменения в продуктах и изменять данные в своих локальных базах. Также сервис core-app должен публиковать данные об оформленных страховках, а сервис ins-comp-settlement должен быть подписан на эти сообщения и использовать эти данные для осуществления взаиморасчётов. Публикация эти сообщений должна осуществляться через паттерн Transactional Outbox.
